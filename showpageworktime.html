<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

	<head>

		<title>计算工时</title>
		<meta charset="UTF-8">
		<meta http-equiv="pragma" content="no-cache">
		<meta http-equiv="cache-control" content="no-cache">
		<meta http-equiv="expires" content="0">
		<meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
		<meta http-equiv="description" content="This is my page">
		<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
		<script type="text/javascript" src="js/jquery-1.6.2.min.js"></script>
		<script type="text/javascript" src="js/jquery-latest.js"></script>
		<script type="text/javascript"  src="js/boostrap.min.js"></script>
		<style type="text/css">
			
			.row {
				margin-top: 10px;
			}
			
			h2 {
				margin-top: 25px;
				margin-bottom: 25px;
			}
			
			th {
				text-align: center;
			}
			
			.topbread {
				padding: 2px 7px;
				margin-bottom: 7px;
			}
			.loading {
        position: absolute;
        width: 300px;
        /*top: 250px;*/
        left: 50%;
        margin-top: 20px;
        margin-left: -150px;
        text-align: center;
        padding: 7px 0 0 0;
        font: bold 11px Arial, Helvetica, sans-serif;
      }
		</style>

	</head>

	<body>
		<div class="container">
			<div>
				<ol class="breadcrumb topbread ">
					<li class="active"><span style="font-weight:bold;">技术与平台中心员工工时计算系统</span></li>
					<li>
						<a href="showpagereport.jsp" target="_blank">质量月报统计系统</a>
					</li>
				</ol>
			</div>
			<div style="margin-left:auto;margin-right:auto;">
				<h2 align="center">技术与平台中心员工工时计算系统</h2>
				 <form method="post" name="inputdate" id="inputdateform"> 
				<!--<form method="POST" name="inputdate" action="Calculate">-->

					<div class="row">
						<div class="col-md-2">开始时间：</div>
						<div class="col-md-3">
							<input type="date" class="form-control" name="startdate" /> 
						</div>
						<div class="col-md-2">结束时间：</div>
						<div class="col-md-3">
							<input type="date" class="form-control"  name="enddate" /> 
						</div>
						<div class="col-md-2" style="float: right;">
							<!--<input type="submit" value="开始计算" name="startcal" />-->
							<input type="button" class="btn btn-primary form-control" value="开始计算" onclick="calWorklog()" />
						</div>
					</div>
				</form>
			</div>
			<hr />
			<div>
				<h3 style="margin-top: 20px;">
					计算过程说明：
				</h3>
				<p>
					1.抓取jira中工时数据<br />
					2.计算技术与平台中心人员的所填写项目的总工时<br />
					3.计算技术与平台中心人员未达到每天8H小时情况<br />
					4.计算技术与平台中心未达到每天8H小时的人员所填写项目的占比<br />
					5.计算技术与平台中心人员未达到理论总工时80%的情况<br />
					4.计算技术与平台中心未达到理论总工时80%的人员所填写项目的占比<br />
					
				</p>
				<p>
					说明：由于数据量大，所有数据保存数据库。后续版本再考虑页面上展示结果，敬请见谅！
				</p>
				<!--<h3 align="center">计算过程数据</h3>
				<table align="center" style="width:95%;margin-left:auto;margin-right:auto;" class="table table-bordered">
					<thead>
						<tr>
							<th></th>
							<th></th>
							<th></th>
							<th></th>
							<th></th>
							<th></th>
							<th></th>
							
						</tr>
					</thead>
					<tbody id="workLogBody">
						<tr>
							<td>工作日</td>
							<td>${workdays}</td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							
						</tr>
					</tbody>
				</table>
			</div>-->
		</div>
		
    </div>
    
<div class="modal fade" id="loading">
      <div class="modal-dialog">
         <div class="modal-content" style="height:250px;position: relative;width: 300px; ">
        <!--<div class="modal-content" style="height:100%;position: relative;width: 100%; "> -->
          <div class="modal-header" style="widith:20px;padding:0;">
            <h4 class="modal-title" style="widith:20px;text-align:center;">正在加载中，请稍候。。。</h4>
          </div>
          <div class="modal-body" style="padding-left:40px;padding-top:0">
            <img src="img/loading.gif" />
          </div>
        </div>
      </div>
    </div>
    <!-- <div class="loading" id="loading" style="display:none;">
              加载中，请稍候...
              <img src="img/loading.gif" mce_src="theme/images/loading.gif" alt="loading.." />
            </div>-->
	</body> 
<script type="text/javascript">
	function calWorklog() {
	$('#loading').modal({backdrop: 'static', keyboard: false,show:true});
			//console.log($("#inputdateform").serialize())
			$.ajax({
				type: "post",
				url: "Calculate",
				data: $("#inputdateform").serialize(),
				success: function(data) {
					$('#loading').modal('hide');
					alert("成功完成计算！");
//					console.log(data);
//					var projList=data;
//					var tbody="";
//					for (i=0,len=dataList.length;i<len;i++) {
//						tbody+='<tr>';
//						tbody+='<td>'+dataList[i].ID+'</td>';
//						tbody+='</tr>';
//					}
//					$("#projbody").append(tbody);

				},
				error: function(XMLHttpRequest, textStatus, errorThrown) {
					//alert(errorThrown);
					console.log(errorThrown);
				}
			});
		}
</script>
</html>